<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEWANYA NYEMIL</title>
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<link rel="icon" type="image/png" href="https://h2rsi9anqnqbkvkf.public.blob.vercel-storage.com/menu-QCB0NRGv8CTUPm0i09zDdfdiK1yicB.png">
    <!-- Google Fonts - Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- QR Code Generator -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <style>
        /* Neo-brutalist CSS for DEWANYA NYEMIL */
        :root {
            --primary-color: #ff5252;
            --secondary-color: #ffdf5e;
            --text-color: #1a1a1a;
            --background-color: #f9f7f2;
            --card-color: #ffffff;
            --border-color: #000000;
            --shadow-color: rgba(0, 0, 0, 0.10);
            /* Shadow paling halus */
            --success-color: #4caf50;
            --accent-color: #ff9800;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        header {
            background-color: var(--primary-color);
            padding: 1.5rem;
            text-align: center;
            box-shadow: 4px 4px 0 var(--border-color);
            /* Shadow lebih halus */
            border: 3px solid var(--border-color);
            border-radius: 8px;
            margin: 1.5rem;
        }

        h1,
        h2,
        h3 {
            color: var(--text-color);
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        header h1 {
            color: white;
            font-size: 2.5rem;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
        }

        header h1::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            right: 0;
            height: 5px;
            background-color: var(--secondary-color);
            border: 2px solid var(--border-color);
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            padding: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Menu Tabs */
        .menu-tabs {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
            justify-content: center;
            width: 100%; /* Pastikan memenuhi lebar kontainer */
        }

        .tab-btn {
            padding: 0.75rem 1.25rem;
            background-color: var(--card-color);
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 8px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 2px 2px 0 var(--border-color);
            /* Shadow lebih halus */
            white-space: nowrap;
        }

        .tab-btn:hover {
            transform: translate(-1px, -1px);
            /* Efek hover lebih halus */
            box-shadow: 4px 4px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .tab-btn.active {
            background-color: var(--secondary-color);
            transform: translate(-1px, -1px);
            /* Efek hover lebih halus */
            box-shadow: 4px 4px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        /* Media query untuk layar HP (lebar maksimum 767px) */
        @media (max-width: 767px) {
            .product-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Media query untuk iPad (lebar antara 768px dan 991px) */
        @media (min-width: 768px) and (max-width: 991px) {
            .product-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Media query untuk Desktop (lebar minimum 992px) */
        @media (min-width: 992px) {
            .product-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }

        .product-card {
            background-color: var(--card-color);
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            transition: transform 0.3s;
            box-shadow: 4px 4px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .product-card:hover {
            transform: translate(-2px, -2px);
            /* Efek hover lebih halus */
            box-shadow: 6px 6px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .discount-label {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            font-weight: bold;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            box-shadow: 1px 1px 0 var(--border-color);
            /* Shadow lebih halus */
            z-index: 2;
        }

        .product-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-bottom: 2px solid var(--border-color);
            /* Border lebih tipis */
        }

        .product-info {
            padding: 1rem;
        }

        .product-name {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            font-weight: 800;
        }

        .product-price {
            font-weight: bold;
            font-size: 1.25rem;
            color: var(--primary-color);
            margin-bottom: 0.75rem;
        }

        .variant-select {
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.6rem;
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 6px;
            background-color: var(--background-color);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .add-to-cart {
            width: 100%;
            padding: 0.75rem;
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 2px 2px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .add-to-cart:hover {
            transform: translate(-1px, -1px);
            /* Efek hover lebih halus */
            box-shadow: 4px 4px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        /* Cart Styles */
        .cart-container {
            background-color: var(--card-color);
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 12px;
            padding: 1.5rem;
            position: sticky;
            top: 2rem;
            box-shadow: 4px 4px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .cart-title {
            font-size: 1.5rem;
            margin-bottom: 1.25rem;
            text-align: center;
            color: var(--primary-color);
            position: relative;
        }

        .cart-title::after {
            content: "";
            position: absolute;
            bottom: -8px;
            left: 30%;
            right: 30%;
            height: 4px;
            background-color: var(--secondary-color);
            border-radius: 4px;
        }

        .cart-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .cart-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 8px;
            margin-bottom: 0.75rem;
            background-color: var(--background-color);
            box-shadow: 1px 1px 0 var(--shadow-color);
            /* Shadow lebih halus */
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-weight: bold;
            font-size: 0.95rem;
        }

        .item-variant {
            font-size: 0.8rem;
            color: #666;
        }

        .item-price {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .item-quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0 0.5rem;
        }

        .qty-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 1px 1px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .qty-btn:hover {
            background-color: var(--secondary-color);
        }

        .qty-value {
            font-weight: bold;
            min-width: 20px;
            text-align: center;
        }

        .remove-item {
            background: none;
            border: none;
            color: #ff5252;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .empty-cart {
            text-align: center;
            padding: 2rem 1rem;
            color: #888;
        }

        .cart-summary {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 0.75rem;
            border-top: 1px dashed var(--border-color);
            /* Border lebih tipis */
            border-bottom: 1px dashed var(--border-color);
            /* Border lebih tipis */
            font-weight: bold;
            font-size: 1.1rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 0.85rem;
            background-color: var(--primary-color);
            color: white;
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 3px 3px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .checkout-btn:hover:not(:disabled) {
            transform: translate(-1px, -1px);
            /* Efek hover lebih halus */
            box-shadow: 5px 5px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .checkout-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Cart Icon */
        .cart-icon {
            position: fixed;
            right: 2rem;
            bottom: 2rem;
            width: 60px;
            height: 60px;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 3px 3px 0 var(--border-color);
            /* Shadow lebih halus */
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            cursor: pointer;
            z-index: 100;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .cart-icon:hover {
            transform: translate(-1px, -1px);
            /* Efek hover lebih halus */
            box-shadow: 5px 5px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .cart-badge {
            position: absolute;
            top: 0;
            right: 0;
            background-color: var(--primary-color);
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .modal-content {
            background-color: var(--card-color);
            width: 100%;
            max-width: 500px;
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 12px;
            box-shadow: 6px 6px 0 var(--border-color);
            /* Shadow lebih halus */
            padding: 2rem;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-button {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 6px;
            font-size: 1rem;
            background-color: var(--background-color);
        }

        .order-summary {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            max-height: 150px;
            overflow-y: auto;
        }

        .order-summary h3 {
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            text-align: center;
        }

        .generate-btn,
        .confirm-btn {
            width: 100%;
            padding: 0.85rem;
            font-weight: bold;
            font-size: 1rem;
            border: 2px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 8px;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.2s;
        }

        .generate-btn {
            background-color: var(--secondary-color);
            color: var(--text-color);
            box-shadow: 3px 3px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .confirm-btn {
            background-color: var(--success-color);
            color: white;
            box-shadow: 3px 3px 0 var(--border-color);
            /* Shadow lebih halus */
            margin-top: 1.5rem;
        }

        .generate-btn:hover,
        .confirm-btn:hover {
            transform: translate(-1px, -1px);
            /* Efek hover lebih halus */
            box-shadow: 5px 5px 0 var(--border-color);
            /* Shadow lebih halus */
        }

        .qrcode-container {
            text-align: center;
            margin-top: 1.5rem;
        }

        .qrcode-container img {
            max-width: 100%;
            height: auto;
            border: 1px solid var(--border-color);
            /* Border lebih tipis */
            border-radius: 8px;
            box-shadow: 2px 2px 0 var(--shadow-color);
            /* Shadow lebih halus */
        }

        /* Food-themed decorative elements */
        .container::before {
            content: "🍔";
            position: absolute;
            top: 1rem;
            left: 1rem;
            font-size: 2rem;
            z-index: -1;
            opacity: 0.2;
        }

        .container::after {
            content: "🍹";
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            font-size: 2rem;
            z-index: -1;
            opacity: 0.2;
        }

        /* Responsive adjustments */
        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
            }

            .cart-container {
                position: relative;
                top: 0;
                order: -1;
                margin-bottom: 2rem;
            }

            .menu-tabs {
                justify-content: flex-start;
            }
        }

        @media (max-width: 600px) {
            .product-grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2rem;
            }

            .modal-content {
                padding: 1.5rem;
            }
        }

        /* Font awesome icons */
        @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css');
    </style>

</head>

<body>
    <header>
        <h1>DEWANYA NYEMIL</h1>
    </header>

    <div class="container">
        <div class="menu-tabs">
            <button class="tab-btn active" data-category="all">Semua</button>
            <button class="tab-btn" data-category="makanan">Makanan</button>
            <button class="tab-btn" data-category="cemilan">Cemilan</button>
            <button class="tab-btn" data-category="minuman">Minuman</button>
            <button class="tab-btn" data-category="kebab">Kebab</button>
        </div>


        <div class="product-grid" id="productList">
            <!-- Products will be generated here -->
        </div>

        <div class="cart-container" id="cartContainer">
            <h2 class="cart-title">Keranjang Belanja</h2>
            <div id="cartItems" class="cart-items">
                <div class="empty-cart" id="emptyCart">
                    <i class="fas fa-shopping-cart" style="font-size: 48px; color: #ddd; margin-bottom: 15px;"></i>
                    <p>Keranjang belanja Anda kosong</p>
                </div>
            </div>
            <div class="cart-summary">
                <span>Total:</span>
                <span id="cartTotal">Rp 0</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn" disabled>Bayar Sekarang</button>
        </div>
    </div>

    <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-badge" id="cartBadge">0</span>
    </div>

    <div class="modal" id="purchaseModal">
        <div class="modal-content">
            <button class="close-button">×</button>
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary-color);">Checkout Pesanan</h2>

            <div class="order-summary" id="orderSummary">
                <h3>Ringkasan Pesanan</h3>
                <div id="orderItems"></div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-weight: bold;">
                    <span>Total:</span>
                    <span id="orderTotal">Rp 0</span>
                </div>
            </div>

            <div class="form-group">
                <label for="nameInput">Nama Lengkap*</label>
                <input type="text" id="nameInput" placeholder="Nama Lengkap Anda" required>
            </div>

            <div class="form-group">
                <label for="phoneInput">Nomor HP*</label>
                <input type="tel" id="phoneInput" placeholder="08xxxxxxxxxx" required>
            </div>

            <button class="generate-btn" id="generateButton">Buat QR Code Pembayaran</button>

            <div class="qrcode-container" id="qrcode"></div>

            <button class="confirm-btn" id="confirmPaymentButton">Konfirmasi Pembayaran</button>

            <input type="hidden" id="totalPriceInput">
        </div>
    </div>

    <script>
        // Dummy data untuk QRIS
        const qrisInput = "00020101021126610014COM.GO-JEK.WWW01189360091436645947040210G6645947040303UMI51440014ID.CO.QRIS.WWW0215ID10253811739190303UMI5204549953033605802ID5914Dewanya nyemil6006JEPARA61055946262070703A016304765D";
        const waNumber = '628976255469'; // Ganti dengan nomor WhatsApp Anda
        const appScriptURL = 'https://script.google.com/macros/s/AKfycbxLJ9uFuNApYtLNRaBo6DnDtI-DXQZ2qLOOQgMWGoMHthbjQaf6kD91kYKSnldPEbcM_A/exec'; // Ganti dengan URL script GAS Anda

        // Data produk dalam format JavaScript
        const products = [
    {
        id: 1,
        name: "Ayam Keju",
        price: 5000,
        discount: 0,
        imageUrl: "https://img-global.cpcdn.com/recipes/ea426a4a34a5c959/400x400cq70/photo.jpg",
        category: "makanan",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 2,
        name: "Pangsit Goreng",
        price: 5000,
        discount: 0,
        imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSX9EnZgeIlZ3ddQ45FiuRbYYJkM6OYE47mCA&s",
        category: "cemilan",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 3,
        name: "Ayam Rambutan",
        price: 5000,
        discount: 0,
        imageUrl: "https://www.dapurkobe.co.id/wp-content/uploads/ayam-rambutan.jpg",
        category: "makanan",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 4,
        name: "Pangsit Chili Oil",
        price: 5000,
        discount: 0,
        imageUrl: "https://static.promediateknologi.id/crop/0x0:0x0/0x0/webp/photo/p2/250/2024/10/21/Vegan-Wonton-Chili-Oil-scaled-copy-3792509920.jpg",
        category: "cemilan",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 5,
        name: "Chicken Wing",
        price: 6000,
        discount: 0,
        imageUrl: "https://www.recipetineats.com/tachyon/2024/11/New-Oreleans-chicken-wings_1.jpg",
        category: "makanan",
        variants: ["Fire Saos", "Bolognese", "Geprek"]
    },
    {
        id: 6,
        name: "Chicken Popcorn",
        price: 6000,
        discount: 0,
        imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBEMlezemGyA9xa8yWYt6SnNvG9r-CPy6sNQ&s",
        category: "makanan",
        variants: ["Fire Saos", "Bolognese", "Geprek"]
    },
    {
        id: 7,
        name: "Spageti Bolognese",
        price: 5000, // Diperbaiki dari 0 ke 5000
        discount: 0,
        imageUrl: "https://cdn1-production-images-kly.akamaized.net/Gs5apuxwEUuyzhhZKejFwgO8pOs=/0x194:5616x3359/1200x675/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/3048436/original/030475400_1581499756-shutterstock_413580649.jpg",
        category: "makanan",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 8,
        name: "Nasi Putih",
        price: 3000,
        discount: 0,
        imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQUh5bqsScdDcVemchIUMuL9fTfPspPFFwZIg&s",
        category: "makanan",
        variants: ["No Variant"]
    },
    {
        id: 9,
        name: "Kopi Spesial",
        price: 5000,
        discount: 0,
        imageUrl: "https://asset.kompas.com/crops/C8Mo8F0gQE6PyXXec9oLxarbh1s=/34x24:475x318/1200x800/data/photo/2021/08/05/610b6ce6b3440.jpg",
        category: "minuman",
        variants: ["Gula Aren", "Susu", "Karamel"]
    },
    {
        id: 10,
        name: "Kopi Signature",
        price: 5000,
        discount: 0,
        imageUrl: "https://cdn1-production-images-kly.akamaized.net/HsfW735frtCCJWhRfg5hoCP9PEU=/0x1967:2759x3522/1200x675/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/4212854/original/028658700_1667442943-pariwat-pannium-EgDkl00Hiqw-unsplash.jpg",
        category: "minuman",
        variants: ["Hazelnut", "Butterscotch"]
    },
    {
        id: 11,
        name: "Milk Shake",
        price: 5000,
        discount: 0,
        imageUrl: "https://img.okezone.com/content/2016/07/13/481/1436924/minuman-milkshake-bisa-menurunkan-berat-badan-3VtdOMuuxu.jpg",
        category: "minuman",
        variants: ["Coklat", "Korean Strawberry"]
    },
    {
        id: 12,
        name: "Roti Bakar",
        price: 3000,
        discount: 0,
        imageUrl: "https://cdn1-production-images-kly.akamaized.net/89U64fKOEkQz3jU1paKVJPYys84=/1200x675/smart/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/2469757/original/039967700_1543260105-resep-sederhana-roti-bakar-cokelat-keju-spesial-pakai-roti-tawar.jpg",
        category: "makanan",
        variants: ["Strawberry", "Blueberry", "Coklat", "Sandwich"]
    },
    {
                id: 13,
        name: "Kebab Ori",
        price: 5000,
        discount: 0,
        imageUrl: "https://www.dapurkobe.co.id/wp-content/uploads/kebab-sosis.jpg",
        category: "kebab",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 14,
        name: "Kebab Jumbo",
        price: 8000,
        discount: 0,
        imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8Ofqan_LQ0vXfB027tso9CtcT4h34TB6lCg&s",
        category: "kebab",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    },
    {
        id: 15,
        name: "Kebab Spesial",
        price: 10000,
        discount: 0,
        imageUrl: "https://cdn0-production-images-kly.akamaized.net/7f3byLchmG2U7Ca6uNHICwIg-H4=/800x450/smart/filters:quality(75):strip_icc():format(webp)/kly-media-production/medias/3093628/original/008903900_1585930368-burrito-chicken-delicious-dinner-461198.jpg",
        category: "kebab",
        variants: ["Tidak pedas", "Pedas", "Extra pedas"]
    }
];



        // Fungsi untuk menambahkan padding pada angka
        function pad(number) {
            return number < 10 ? '0' + number : number.toString();
        }

        // Fungsi untuk menghitung CRC16
        function toCRC16(input) {
            let crc = 0xFFFF;
            for (let i = 0; i < input.length; i++) {
                crc ^= input.charCodeAt(i) << 8;
                for (let j = 0; j < 8; j++) {
                    crc = (crc & 0x8000) ? (crc << 1) ^ 0x1021 : crc << 1;
                }
            }
            let hex = (crc & 0xFFFF).toString(16).toUpperCase();
            return hex.length === 3 ? "0" + hex : hex;
        }

        // Fungsi untuk membuat string QRIS dinamis
        function makeString(qris, { nominal } = {}) {
            let qrisModified = qris.slice(0, -4).replace("010211", "010212");
            let qrisParts = qrisModified.split("5802ID");

            let amount = "54" + pad(nominal.toString().length) + nominal;
            amount += "5802ID";

            let output = qrisParts[0].trim() + amount + qrisParts[1].trim();
            output += toCRC16(output);

            return output;
        }

        document.addEventListener('DOMContentLoaded', function () {
            const modal = document.getElementById('purchaseModal');
            const productList = document.getElementById('productList');
            const closeButton = document.querySelector('.close-button');
            const confirmPaymentButton = document.getElementById('confirmPaymentButton');
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const cartBadge = document.getElementById('cartBadge');
            const checkoutBtn = document.getElementById('checkoutBtn');
            const cartIcon = document.getElementById('cartIcon');
            const cartContainer = document.getElementById('cartContainer');
            const emptyCart = document.getElementById('emptyCart');
            const tabButtons = document.querySelectorAll('.tab-btn');
            const orderItems = document.getElementById('orderItems');
            const orderTotal = document.getElementById('orderTotal');

            let cart = [];

            function calculateDiscountedPrice(price, discount) {
                if (discount > 0) {
                    const discountAmount = price * (discount / 100);
                    return price - discountAmount;
                }
                return price;
            }

            function updateCartBadge() {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartBadge.textContent = totalItems;

                if (totalItems === 0) {
                    emptyCart.style.display = 'block';
                    checkoutBtn.disabled = true;
                } else {
                    emptyCart.style.display = 'none';
                    checkoutBtn.disabled = false;
                }
            }

            function updateCartDisplay() {
                cartItems.innerHTML = '';

                if (cart.length === 0) {
                    cartItems.appendChild(emptyCart);
                    return;
                }

                let total = 0;

                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const cartItem = document.createElement('div');
                    cartItem.classList.add('cart-item');

                    cartItem.innerHTML = `
                        <div class="item-info">
                            <div class="item-name">${item.name}</div>
                            <div class="item-variant">${item.variant}</div>
                            <div class="item-price">Rp ${item.price.toLocaleString()}</div>
                        </div>
                        <div class="item-quantity">
                            <button class="qty-btn minus" data-index="${index}">-</button>
                            <span class="qty-value">${item.quantity}</span>
                            <button class="qty-btn plus" data-index="${index}">+</button>
                        </div>                        <button class="remove-item" data-index="${index}">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;

                    cartItems.appendChild(cartItem);
                });

                cartTotal.textContent = `Rp ${total.toLocaleString()}`;
                updateCartBadge();

                // Add event listeners to the newly created buttons
                document.querySelectorAll('.qty-btn.minus').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.dataset.index);
                        if (cart[index].quantity > 1) {
                            cart[index].quantity--;
                        } else {
                            cart.splice(index, 1);
                        }
                        updateCartDisplay();
                    });
                });

                document.querySelectorAll('.qty-btn.plus').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.dataset.index);
                        cart[index].quantity++;
                        updateCartDisplay();
                    });
                });

                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = parseInt(this.dataset.index);
                        cart.splice(index, 1);
                        updateCartDisplay();
                    });
                });
            }

            function generateProductCards(category = 'all') {
                productList.innerHTML = '';

                const filteredProducts = category === 'all'
                    ? products
                    : products.filter(product => product.category === category);

                filteredProducts.forEach(product => {
                    const discountedPrice = calculateDiscountedPrice(product.price, product.discount);
                    const productCard = document.createElement('div');
                    productCard.classList.add('product-card');
                    productCard.dataset.productId = product.id;

                    let priceHTML = `
                        <p class="product-price">Rp ${product.price.toLocaleString()}</p>
                    `;

                    let discountLabel = '';
                    if (product.discount > 0) {
                        priceHTML = `
                            <p style="text-decoration: line-through; color: #999; font-size: 14px;">Rp ${product.price.toLocaleString()}</p>
                            <p class="product-price">Rp ${discountedPrice.toLocaleString()}</p>
                        `;
                        discountLabel = `<span class="discount-label">-${product.discount}%</span>`;
                    }

                    // Create variant options HTML
                    let variantOptions = '';
                    product.variants.forEach(variant => {
                        variantOptions += `<option value="${variant}">${variant}</option>`;
                    });

                    productCard.innerHTML = `
                        ${discountLabel}
                        <img src="${product.imageUrl}" alt="${product.name}" class="product-image">
                        <div class="product-info">
                            <h3 class="product-name">${product.name}</h3>
                            ${priceHTML}
                            <select class="variant-select" data-product-id="${product.id}">
                                ${variantOptions}
                            </select>
                            <button class="add-to-cart" data-product-id="${product.id}" data-product-price="${discountedPrice}">
                                Checkout
                            </button>
                        </div>
                    `;

                    productList.appendChild(productCard);
                });

                // Add event listeners to buttons
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', function () {
                        const productId = parseInt(this.dataset.productId);
                        const price = parseInt(this.dataset.productPrice);
                        const productElement = document.querySelector(`.variant-select[data-product-id="${productId}"]`);
                        const selectedVariant = productElement.value;
                        const product = products.find(p => p.id === productId);

                        // Check if product with same variant exists in cart
                        const existingItemIndex = cart.findIndex(item =>
                            item.id === productId && item.variant === selectedVariant);

                        if (existingItemIndex !== -1) {
                            // Increment quantity
                            cart[existingItemIndex].quantity++;
                        } else {
                            // Add new item to cart
                            cart.push({
                                id: productId,
                                name: product.name,
                                price: price,
                                variant: selectedVariant,
                                quantity: 1
                            });
                        }

                        updateCartDisplay();

                        // Show confirmation
                        const addBtn = this;
                        const originalText = addBtn.textContent;
                        addBtn.textContent = "✓ Ditambahkan!";
                        addBtn.style.backgroundColor = "#3d8b40";

                        setTimeout(() => {
                            addBtn.textContent = originalText;
                            addBtn.style.backgroundColor = "";
                        }, 1500);
                    });
                });
            }

            // Initialize with all products
            generateProductCards();

            // Tab buttons functionality
            tabButtons.forEach(button => {
                button.addEventListener('click', function () {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    generateProductCards(this.dataset.category);
                });
            });

            // Cart icon toggle
            cartIcon.addEventListener('click', function () {
                window.scrollTo({
                    top: cartContainer.offsetTop,
                    behavior: 'smooth'
                });
            });

            // Checkout button
            checkoutBtn.addEventListener('click', function () {
                if (cart.length === 0) return;

                // Populate order summary
                orderItems.innerHTML = '';
                let total = 0;

                cart.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.style.display = 'flex';
                    itemElement.style.justifyContent = 'space-between';
                    itemElement.style.marginBottom = '5px';

                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    itemElement.innerHTML = `
                        <span>${item.quantity}x ${item.name} (${item.variant})</span>
                        <span>Rp ${itemTotal.toLocaleString()}</span>
                    `;

                    orderItems.appendChild(itemElement);
                });

                orderTotal.textContent = `Rp ${total.toLocaleString()}`;
                document.getElementById('totalPriceInput').value = total;

                modal.style.display = "flex";
                confirmPaymentButton.style.display = "none";
            });

            closeButton.addEventListener('click', function () {
                modal.style.display = "none";
            });

            window.addEventListener('click', function (event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });

            // Fungsi untuk membuat QRIS dan menampilkannya
            document.getElementById('generateButton').addEventListener('click', function () {
                const name = document.getElementById('nameInput').value;
                const email = document.getElementById('emailInput').value;
                const phone = document.getElementById('phoneInput').value;
                const totalPrice = document.getElementById('totalPriceInput').value;

                if (!name || !email || !phone) {
                    alert('Harap isi semua kolom yang diperlukan!');
                    return;
                }

                const qrcodeContainer = document.getElementById('qrcode');
                qrcodeContainer.innerHTML = ''; // Clear previous QR code

                // Generate QR code
                const typeNumber = 0;
                const errorCorrectionLevel = 'L';
                const qr = qrcode(typeNumber, errorCorrectionLevel);
                const nominal = parseInt(totalPrice);

                const payload = makeString(qrisInput, { nominal });

                qr.addData(payload);
                qr.make();

                const img = document.createElement('img');
                img.src = qr.createDataURL(4, 0);
                qrcodeContainer.appendChild(img);

                confirmPaymentButton.style.display = "block";

                // Optional: Store the payment information in localStorage
                localStorage.setItem('paymentInfo', JSON.stringify({
                    name: name,
                    email: email,
                    phone: phone,
                    totalPrice: totalPrice
                }));
            });

            // Konfirmasi Pembayaran
            confirmPaymentButton.addEventListener('click', function () {
                const name = document.getElementById('nameInput').value;
                const email = document.getElementById('emailInput').value;
                const phone = document.getElementById('phoneInput').value;
                const totalPrice = document.getElementById('totalPriceInput').value;

                // Format cart items for WhatsApp
                const cartDetails = cart.map(item =>
                    `${item.name} (${item.variant}) - Rp ${item.price.toLocaleString()} x ${item.quantity}`
                ).join('\n');

                // Construct the WhatsApp message
                let whatsappMessage = `*Pesanan Baru dari DEWANYA NYEMIL*\n\n`;
                whatsappMessage += `*Nama:* ${name}\n`;
                whatsappMessage += `*Email:* ${email}\n`;
                whatsappMessage += `*Nomor HP:* ${phone}\n\n`;
                whatsappMessage += `*Detail Pesanan:*\n${cartDetails}\n\n`;
                whatsappMessage += `*Total:* Rp ${totalPrice.toLocaleString()}\n\n`;
                whatsappMessage += `_Harap segera diproses!_`;

                // Encode the message for the URL
                const encodedMessage = encodeURIComponent(whatsappMessage);

                // Construct the WhatsApp URL
                const whatsappURL = `https://wa.me/${waNumber}?text=${encodedMessage}`;

                // Send to Google Apps Script and then redirect
                sendToGoogleSheets(name, email, phone, totalPrice, cartDetails, whatsappURL);

                modal.style.display = "none";
                clearCart();
                alert('Pembayaran berhasil! Kami akan segera memproses pesanan Anda.');
            });

            function sendToGoogleSheets(name, email, phone, totalPrice, cartDetails, whatsappURL) {
                fetch(appScriptURL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        'name': name,
                        'email': email,
                        'phone': phone,
                        'totalPrice': totalPrice,
                        'cartDetails': cartDetails,
                        'whatsappURL': whatsappURL
                    })
                }).then(() => {
                    // Redirect ke WhatsApp
                    window.open(whatsappURL, '_blank');
                }).catch((error) => {
                    console.error('Error:', error);
                    alert('Terjadi kesalahan saat mengirim data. Silakan coba lagi.');
                });
            }

            function clearCart() {
                cart = [];
                updateCartDisplay();
                updateCartBadge();
            }
        });
    </script>
</body>

</html>